<div class="container">
  <div class="header">
    <h2>Item Management</h2>
    <button (click)="showForm = !showForm" class="btn btn-primary">{{showForm ? 'Cancel' : 'Add Item'}}</button>
  </div>
  
  <div *ngIf="showForm" class="form-card">
    <h3>{{editingId ? 'Edit' : 'Add'}} Item</h3>
    <form (ngSubmit)="saveItem()">
      <div class="form-row">
        <div class="form-group">
          <label>Item Name *</label>
          <input [(ngModel)]="item.name" name="name" required class="form-control" placeholder="Enter item name">
        </div>
        <div class="form-group">
          <label>Category *</label>
          <select [(ngModel)]="item.categoryId" name="categoryId" required class="form-control">
            <option value="">Select Category</option>
            <option *ngFor="let cat of categories" [value]="cat.id">{{cat.name}}</option>
          </select>
        </div>
      </div>
      <div class="form-row">
        <div class="form-group">
          <label>Price *</label>
          <input [(ngModel)]="item.price" name="price" type="number" step="0.01" required class="form-control" placeholder="Enter price">
        </div>
        <div class="form-group">
          <label>Quantity *</label>
          <input [(ngModel)]="item.quantity" name="quantity" type="number" required class="form-control" placeholder="Enter quantity">
        </div>
      </div>
      <div class="form-group">
        <label>Description</label>
        <textarea [(ngModel)]="item.description" name="description" class="form-control" placeholder="Enter description" rows="3"></textarea>
      </div>
      <div class="form-actions">
        <button type="submit" class="btn btn-success">{{editingId ? 'Update' : 'Save'}}</button>
        <button type="button" (click)="cancelEdit()" class="btn btn-secondary">Cancel</button>
      </div>
    </form>
  </div>
  
  <div class="table-card">
    <table class="table">
      <thead>
        <tr>
          <th>ID</th>
          <th>Item Name</th>
          <th>Category</th>
          <th>Price</th>
          <th>Quantity</th>
          <th>Description</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let itm of items">
          <td>{{itm.id}}</td>
          <td>{{itm.name}}</td>
          <td>{{getCategoryName(itm.categoryId)}}</td>
          <td>{{itm.price | currency}}</td>
          <td>{{itm.quantity}}</td>
          <td>{{itm.description}}</td>
          <td>
            <button (click)="editItem(itm)" class="btn btn-sm btn-warning">Edit</button>
            <button (click)="deleteItem(itm.id!)" class="btn btn-sm btn-danger">Delete</button>
          </td>
        </tr>
        <tr *ngIf="items.length === 0">
          <td colspan="7" class="no-data">No items found</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>